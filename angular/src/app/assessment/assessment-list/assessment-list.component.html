<div class="container my-4">
<button class="btn btn-primary d-block ml-auto" (click)="open(modal)">
    Create Assessment
</button>
<ng-template #modal let-modal>
    <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">Create Assessment</h4>
        <button
            type="button"
            class="btn btn-close"
            aria-label="Close"
            (click)="modal.dismiss()"
        >
            x
        </button>
    </div>
    <div class="modal-body">
        <app-assessment-creation-form> </app-assessment-creation-form>
    </div>
    <!-- <div class="modal-footer">
        <button
            type="button"
            class="btn btn-outline-dark"
            (click)="modal.close('Save click')"
        >
            Save
        </button>
    </div> -->
</ng-template>

<!-- TODO: hide the subject that does not have assessment -->
<div *ngFor="let obj of assessments | keyvalue" class="my-4">
    <div class="card shadow-sm" *ngIf="obj.value.length > 0">
        <!-- {{ obj.value | json }} -->
        <div class="card-body">
            <h4 class="card-title">
                {{ getSubjectName(obj.value[0].subject) }}
            </h4>
            <div class="mt-4 rounded">
                <div *ngFor="let a of obj.value" class="my-3">
                    <div class="card d-flex flex-row">
                        <div class="card-body">
                            <div>
                                <span>{{ a.name }}</span>
                                <span class="float-right">
                                    {{ a.data_created | date: "dd/MM/yyyy" }}
                                </span>
                            </div>
                            <div class="d-flex mt-2">
                                <span>Progress</span>
                                <span
                                    class="progress ml-auto"
                                    style="width: 85%"
                                >
                                    <span
                                        class="progress-bar"
                                        style="width: 25%"
                                        role="progressbar"
                                        aria-valuenow="0"
                                        aria-valuemin="0"
                                        aria-valuemax="100"
                                    ></span>
                                </span>
                            </div>
                        </div>
                        <button
                            routerLink="/assessment-details/{{ a.id }}"
                            class="btn btn-outline-primary d-block my-4 mr-3"
                            style="width: 17%"
                        >
                            Start Marking
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</div>
